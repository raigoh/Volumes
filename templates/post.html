{{define "content"}}
<article class="full-post">
  <h2>{{.Post.Title}}</h2>
  <p class="post-meta">
    Posted by {{.Post.Username}} in {{.Post.Category}} on
    {{.Post.CreatedAt.Format "Jan 02, 2006"}}
  </p>
  <div class="post-content">{{.Post.Content}}</div>
  <div class="post-actions">
    <form
      action="/post/{{.Post.ID}}/like"
      method="POST"
      style="display: inline"
    >
      <button type="submit">Like ({{.Post.Likes}})</button>
    </form>
    <form
      action="/post/{{.Post.ID}}/dislike"
      method="POST"
      style="display: inline"
    >
      <button type="submit">Dislike ({{.Post.Dislikes}})</button>
    </form>
  </div>
</article>

<section class="comments">
  <h3>Comments</h3>
  {{range .Comments}}
  <div class="comment">
    <p class="comment-meta">
      {{.Username}} on {{.CreatedAt.Format "Jan 02, 2006 at 15:04"}}
    </p>
    <p class="comment-content">{{.Content}}</p>
    <div class="comment-actions">
      <form
        action="/comment/{{.ID}}/like"
        method="POST"
        style="display: inline"
      >
        <button type="submit">Like ({{.Likes}})</button>
      </form>
      <form
        action="/comment/{{.ID}}/dislike"
        method="POST"
        style="display: inline"
      >
        <button type="submit">Dislike ({{.Dislikes}})</button>
      </form>
    </div>
  </div>
  {{else}}
  <p>No comments yet.</p>
  {{end}}
</section>

{{if .User}}
<form class="comment-form" action="/post/{{.Post.ID}}/comment" method="POST">
  <h3>Add a Comment</h3>
  <textarea name="content" required></textarea>
  <button type="submit">Post Comment</button>
</form>
{{else}}
<p>Please <a href="/login">login</a> to comment.</p>
{{end}} {{end}}
